matrix:
  include:
    - os: linux
      sudo: required
      language: objective-c

    - os: osx
      language: objective-c
      osx_image: xcode9.1
      env: 
        - LC_CTYPE=en_US.UTF-8
        - LANG=en_US.UTF-8
        - IOS_FRAMEWORK_SCHEME="Mechanica iOS"
        - MACOS_FRAMEWORK_SCHEME="Mechanica macOS"
        - TVOS_FRAMEWORK_SCHEME="Mechanica tvOS"
        - WATCHOS_FRAMEWORK_SCHEME="Mechanica watchOS"
        - IOS_SDK=iphonesimulator11.1
        - MACOS_SDK=macosx10.13
        - TVOS_SDK=appletvsimulator11.1
        - WATCHOS_SDK=watchsimulator4.1

  - DESTINATION="OS=11.1,name=iPhone X"               SCHEME="$IOS_FRAMEWORK_SCHEME"      SDK="$IOS_SDK"      RUN_TESTS="YES"   POD_LINT="YES"   CODECOV_FLAG="ios"       SWIFT_PACKAGE="YES"

# skip release group defined in Gemfile
bundler_args: --without release

after_success:
  - sleep 5